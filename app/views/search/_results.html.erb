<% do_date_separators = false if !defined? do_date_separators %>
<% title_only = false if !defined? title_only %>
<% numbered = true if !defined? numbered %>

<% results.each do |result| %>
  <% unless result[:title].blank? %>
  
    <% if do_date_separators %>
      <% if result[:meta][:start_date] && @month_separator_check != "#{result[:meta][:start_date].month.to_s}/#{result[:meta][:start_date].year.to_s}" %>
        <div class="month_separator">
          <%= result[:meta][:start_date].to_s(:month_year) %>
        </div>
        <% @month_separator_check = "#{result[:meta][:start_date].month.to_s}/#{result[:meta][:start_date].year.to_s}" %>
      <% end %>
    <% end %>
  
    <%= render :partial => "search/results/#{result_type(result)}", :layout => "search/results/layout", :locals => { :result => result, :title_only => title_only, :numbered => numbered } %>
    
  <% end %>
<% end %>
